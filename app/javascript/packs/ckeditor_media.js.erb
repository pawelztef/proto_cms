
import Rails from 'rails-ujs';
require('./media.js');



$(() => { 
  const addButton = document.querySelector('#add_media_to_editor')
  if(addButton) {
    addButton.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      window.Pz.ajaxMediaAll();
      Rails.ajax({
        url: "/admin/media/gallery",
        type: "get",
        success: () => {
        }
      });
    });
  }


    <%# function uploadAttachment(attachment) { %>
      <%#   fetch("/admin/media", { %>
      <%#     method: 'post', %>
    <%#     body: JSON.stringify(myData), %>
    <%#     headers: { %>
      <%#       'Content-Type': 'application/json', %>
    <%#       'X-CSRF-Token': Rails.csrfToken() %>
    <%#     }, %>
    <%#     credentials: 'same-origin' %>
    <%#   }).then(function(response) { %>
      <%#     Rails.ajax({ %>
      <%#       url: "/admin/media", %>
    <%#       type: "get", %>
    <%#       success: () => { %>
      <%#         mediaCards = document.getElementsByClassName("uk-card-media"); %>
    <%#         window.Pz.mediaCardsInit(mediaCards); %>
    <%#         window.Pz.clearMediaStatsCard(); %>
    <%#         window.Pz.mediaInfoRefresh(); %>
    <%#       } %>
    <%#     }); %>
    <%#   } %>

});

